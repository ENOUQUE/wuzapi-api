<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alfa API</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.4/dist/semantic.min.css">
  <link rel="stylesheet" href="/dashboard/css/app.css">
</head>
<body>

  <!-- Login -->
  <div class="ui middle aligned center aligned grid logingrid hidden">
    <div class="column">
      <div class="ui centered card login" style="width:600px;">
        <div class="content">
          <div class="center aligned mb-4">
            <i class="whatsapp icon bi-whatsapp"></i> 
            <h2 class="ui header">Alfa API Manager</h2>
            <p class="text-muted">Log in to access the dashboard</p>
          </div>
          <form id="loginForm" class="ui form mb-4">
            <div class="field mb-4" style="text-align:left;">
              <label for="loginToken">Access Token</label>
              <input type="text" id="loginToken" placeholder="Type your access token">
              <div class="ui description">
                  Token used to authenticate your requests to the API.
              </div>
            </div>
            <div class="ui fluid buttons">
              <button type="submit" class="ui primary button" id="regularLoginBtn">
                <i class="sign-in icon"></i>Login
              </button>
              <div class="or"></div>
              <button type="button" class="ui button" id="loginAsAdminBtn">
                <i class="shield alternate icon"></i>Admin Login
              </button>
            </div>
          </form>
          <div class="ui info message" style="text-align:left;">
            <div class="header mb-4">
              <i class="user icon"></i> User Login
            </div>
            <p>Please enter user credentials:</p>
            <ul>
              <li>Use your user token in the field above</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Header Menu -->
  <div class="ui fixed menu menu-header hidden maingrid admingrid">
    <div class="ui container fluid secondary pointing">
      <a href="#" class="header item">
        <span class='title-container'>
          <i class="whatsapp icon"></i> Alfa API Manager
        </span>
      </a>
      <div class="right menu">
        <div class="item" id="user-role-indicator">
          <i class="user icon"></i>
          <span id="user-role-text">...</span>
        </div>
        <div class="item">
          <a href='#' id='menulogout'>Logout</a></div>
        </div>
      </div>
    </div>
  </div>
  
  <div style='height:70px;'>&nbsp;</div> <!-- top margin/spacer for header -->

  <!-- Instances Table -->
  <div class="ui container fluid hidden admingrid p1">
    <div class="ui stackable grid">
      <div class="row">
        <div class="left floated left aligned ten wide column">
          <h1 class="ui header">Instances Management</h1>
        </div>
        <div class="right floated right aligned six wide column">
          <button class="ui primary button" id='addInstanceButton'>
            <i class="plus icon"></i> Add Instance
          </button>
        </div>
      </div>
    </div>
    <div class="ui mb-4">
      <div class="ui active inverted dimmer" id="loading">
        <div class="ui text loader">Loading instances...</div>
      </div>
      <table class="ui celled table" id="instances-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Connected</th>
            <th>Logged In</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="instances-body"></tbody>
      </table>
    </div>
  </div> 

  <!-- Instance Cards and Go Back to list button -->
  <div class="ui container fluid p1">
    <div class="ui stackable cards" id="instances-cards"></div>
    <div class="ui right aligned basic segment adminlogin">
      <button class="ui secondary button" onclick="goBackToList()">
        <i class="left arrow icon"></i> Go Back
      </button>
    </div>
  </div>

  <!-- Dashboard -->
  <div class="ui container fluid p1 hidden maingrid" id="mainDashboard">

    <div class="ui horizontal divider widget"> Configuration </div>
    <div class="ui three column stackable grid cards">
      <div class="purple card hidden widget" style="cursor: pointer;" id="s3Config">
        <div class="content"><a class="ui purple right ribbon label">Config</a>
          <div class="header">S3 Storage</div>
          <div class="description">Configure S3-compatible storage for media files.</div>
        </div>
      </div>
      <div class="purple card hidden widget" style="cursor: pointer;" id="proxyConfig">
        <div class="content"><a class="ui purple right ribbon label">Config</a>
          <div class="header">Proxy Settings</div>
          <div class="description">Configure proxy for WhatsApp connections.</div>
        </div>
      </div>
      <div class="purple card hidden widget" style="cursor: pointer;" id="webhookConfig">
        <div class="content"><a class="ui purple right ribbon label">Config</a>
          <div class="header">Webhook Events</div>
          <div class="description">Configure webhook URL and event subscriptions.</div>
        </div>
      </div>
      <div class="purple card hidden widget" style="cursor: pointer;" id="historyConfig">
        <div class="content"><a class="ui purple right ribbon label">Config</a>
          <div class="header">Message History</div>
          <div class="description">Configure message history.</div>
        </div>
      </div>
      <div class="purple card hidden widget" style="cursor: pointer;" id="hmacConfig">
        <div class="content"><a class="ui purple right ribbon label">Config</a>
          <div class="header">HMAC Key</div>
          <div class="description">Configure HMAC key for webhook security.</div>
        </div>
      </div>
      <div class="purple card hidden widget" style="cursor: pointer;" id="chatwootConfig">
        <div class="content"><a class="ui purple right ribbon label">Integração</a>
          <div class="header">Chatwoot</div>
          <div class="description">Configure Chatwoot integration for customer support.</div>
        </div>
      </div>
    </div>

    <div class="ui horizontal divider widget"> User </div>
    <div class="ui three column stackable grid cards">
      <div class="red card hidden widget" style="cursor: pointer;" id="userInfo">
        <div class="content"><a class="ui red right ribbon label">User</a>
          <div class="header">User Info</div>
          <div class="description"> Search users by phone number.</div>
        </div>
      </div>
      <div class="red card hidden widget" style="cursor: pointer;" id="userAvatar">
        <div class="content"><a class="ui red right ribbon label">User</a>
          <div class="header">User Avatar</div>
          <div class="description"> Get user Avatar by phone number.</div>
        </div>
      </div>
      <div class="red card hidden widget" style="cursor: pointer;" id="userContacts">
        <div class="content"><a class="ui red right ribbon label">User</a>
          <div class="header">Get Contacts</div>
          <div class="description"> Get all contacts.</div>
        </div>
      </div>
    </div>

    <div class="ui horizontal divider widget"> Chat </div>

    <div class="ui three column stackable grid cards">
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendTextMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Text Message</div>
          <div class="description"> Sends a text message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendButtonsMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Buttons Message</div>
          <div class="description"> Sends a message with interactive buttons (up to 3 buttons).</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendListMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send List Message</div>
          <div class="description"> Sends a message with a selectable list menu.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="deleteMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Delete Message</div>
          <div class="description"> Deletes your sent message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendImageMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Image</div>
          <div class="description"> Sends an image message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendAudioMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Audio</div>
          <div class="description"> Sends an audio message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendVideoMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Video</div>
          <div class="description"> Sends a video message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendDocumentMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Document</div>
          <div class="description"> Sends a document message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendStickerMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Sticker</div>
          <div class="description"> Sends a sticker message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendLocationMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Location</div>
          <div class="description"> Sends a location message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendContactMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Contact</div>
          <div class="description"> Sends a contact message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="sendPollMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Send Poll</div>
          <div class="description"> Sends a poll message to a group.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="reactMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">React to Message</div>
          <div class="description"> Reacts to a message with an emoji.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="markReadMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Mark as Read</div>
          <div class="description"> Marks a message as read.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="editMessage">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Edit Message</div>
          <div class="description"> Edits a previously sent message.</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="chatPresence">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Chat Presence</div>
          <div class="description"> Sets presence in chat (typing/recording).</div>
        </div>
      </div>
      <div class="blue card hidden widget" style="cursor: pointer;" id="archiveChat">
        <div class="content"><a class="ui blue right ribbon label">Chat</a>
          <div class="header">Archive Chat</div>
          <div class="description"> Archives or unarchives a chat.</div>
        </div>
      </div>
    </div>

    <div class="ui horizontal divider widget"> Groups </div>
    <div class="ui three column stackable grid cards">
      <div class="green card hidden widget" style="cursor: pointer;" id="groupsList">
        <div class="content"><a class="ui green right ribbon label">Groups</a>
          <div class="header">List Groups</div>
          <div class="description">View all your WhatsApp groups.</div>
        </div>
      </div>
      <div class="green card hidden widget" style="cursor: pointer;" id="createGroup">
        <div class="content"><a class="ui green right ribbon label">Groups</a>
          <div class="header">Create Group</div>
          <div class="description">Create a new WhatsApp group.</div>
        </div>
      </div>
      <div class="green card hidden widget" style="cursor: pointer;" id="joinGroup">
        <div class="content"><a class="ui green right ribbon label">Groups</a>
          <div class="header">Join Group</div>
          <div class="description">Join a group using invite link.</div>
        </div>
      </div>
    </div>

    <div class="ui horizontal divider widget"> Status </div>
    <div class="ui three column stackable grid cards">
      <div class="orange card hidden widget" style="cursor: pointer;" id="setStatus">
        <div class="content"><a class="ui orange right ribbon label">Status</a>
          <div class="header">Set Status Message</div>
          <div class="description"> Set your WhatsApp status message.</div>
        </div>
      </div>
    </div>

    <div class="ui horizontal divider widget"> Call </div>
    <div class="ui three column stackable grid cards">
      <div class="purple card hidden widget" style="cursor: pointer;" id="rejectCall">
        <div class="content"><a class="ui purple right ribbon label">Call</a>
          <div class="header">Reject Call</div>
          <div class="description"> Reject an incoming call.</div>
        </div>
      </div>
    </div>

  </div>

  <!-- Groups Main Container -->
  <div class="ui container fluid p1 hidden" id="groupsMainContainer">
    <!-- Main Header -->
    <div class="ui container fluid main-header">
      <div class="ui stackable grid">
        <div class="row">
          <div class="left floated left aligned ten wide column">
            <h1 class="ui header">
              <i class="users icon"></i>
              <div class="content">
                Groups Manager
                <div class="sub header">Manage your WhatsApp groups</div>
              </div>
            </h1>
          </div>
          <div class="right floated right aligned six wide column">
            <button class="ui primary button" id="backToDashboard">
              <i class="left arrow icon"></i> Back to Dashboard
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Groups Filter and Search -->
    <div class="ui segment">
      <div class="ui stackable grid">
        <div class="six wide column">
          <div class="ui icon input fluid">
            <input type="text" id="groupsSearch" placeholder="Search groups by name or description...">
            <i class="search icon"></i>
          </div>
        </div>
        <div class="four wide column">
          <select class="ui fluid dropdown" id="groupsFilter">
            <option value="">All Groups</option>
            <option value="normal">Normal Groups</option>
            <option value="community">Communities</option>
            <option value="community_group">Community Groups</option>
          </select>
        </div>
        <div class="three wide column">
          <div class="ui basic buttons fluid">
            <button class="ui button" id="refreshGroups">
              <i class="refresh icon"></i> Refresh
            </button>
          </div>
        </div>
        <div class="three wide column">
          <button class="ui green button fluid" id="createNewGroup">
            <i class="plus icon"></i> Create Group
          </button>
        </div>
      </div>
    </div>

    <!-- Groups Loading -->
    <div class="ui active inverted dimmer" id="groupsLoading">
      <div class="ui text loader">Loading groups...</div>
    </div>

    <!-- Groups List Container -->
    <div class="ui relaxed divided list" id="groupsListContainer">
      <!-- Groups will be populated here -->
    </div>

    <!-- No Groups Message -->
    <div class="ui placeholder segment hidden" id="noGroupsMessage">
      <div class="ui icon header">
        <i class="users icon"></i>
        No groups found
      </div>
      <div class="inline">
        <div class="ui primary button" id="createFirstGroup">Create your first group</div>
      </div>
    </div>
  </div>

  <!-- Session Modals -->

  <div class="ui modal" id="modalLoginWithCode"><i class="close icon"></i>
    <div class="header"> Getting Pair Code </div>
    <div class="content">
      <div class="ui message info">
        <div class="header" id="pairInfo">How to pair?</div>
        <ol id="pairHelp">
          <li>Open your Whatsapp</li>
          <li>Link a device</li>
          <li>Link with pair code</li>
        </ol>
      </div>
      <div class="ui form">
        <div class="field"><label>Phone</label><input id="pairphoneinput" type="text" placeholder="Type your phone number"><small>Press Enter to submit</small></div>
      </div>
    </div>
  </div>

  <!-- Webhook Modals -->

  <div class="ui modal" id="modalSetWebhook"><i class="close icon"></i>
    <div class="header"> Webhook </div>
    <div class="content">
      <div class="ui form">
        <div class="field">
          <label>Webhook Events</label>
          <select id="webhookEvents" class="ui fluid dropdown" multiple="">
            <option value="">Select Events</option>
            <!-- Messages and Communication -->
            <option value="Message">Message</option>
            <option value="UndecryptableMessage">Undecryptable Message</option>
            <option value="Receipt">Receipt</option>
            <option value="MediaRetry">Media Retry</option>
            <!-- Groups and Contacts -->
            <option value="GroupInfo">Group Info</option>
            <option value="JoinedGroup">Joined Group</option>
            <option value="Picture">Picture</option>
            <option value="BlocklistChange">Blocklist Change</option>
            <option value="Blocklist">Blocklist</option>
            <!-- Connection and Session -->
            <option value="Connected">Connected</option>
            <option value="Disconnected">Disconnected</option>
            <option value="ConnectFailure">Connect Failure</option>
            <option value="KeepAliveRestored">Keep Alive Restored</option>
            <option value="KeepAliveTimeout">Keep Alive Timeout</option>
            <option value="LoggedOut">Logged Out</option>
            <option value="ClientOutdated">Client Outdated</option>
            <option value="TemporaryBan">Temporary Ban</option>
            <option value="StreamError">Stream Error</option>
            <option value="StreamReplaced">Stream Replaced</option>
            <option value="PairSuccess">Pair Success</option>
            <option value="PairError">Pair Error</option>
            <option value="QR">QR</option>
            <option value="QRScannedWithoutMultidevice">QR Scanned Without Multidevice</option>
            <!-- Privacy and Settings -->
            <option value="PrivacySettings">Privacy Settings</option>
            <option value="PushNameSetting">Push Name Setting</option>
            <option value="UserAbout">User About</option>
            <!-- Synchronization and State -->
            <option value="AppState">App State</option>
            <option value="AppStateSyncComplete">App State Sync Complete</option>
            <option value="HistorySync">History Sync</option>
            <option value="OfflineSyncCompleted">Offline Sync Completed</option>
            <option value="OfflineSyncPreview">Offline Sync Preview</option>
            <!-- Calls -->
            <option value="CallOffer">Call Offer</option>
            <option value="CallAccept">Call Accept</option>
            <option value="CallTerminate">Call Terminate</option>
            <option value="CallOfferNotice">Call Offer Notice</option>
            <option value="CallRelayLatency">Call Relay Latency</option>
            <!-- Presence and Activity -->
            <option value="Presence">Presence</option>
            <option value="ChatPresence">Chat Presence</option>
            <!-- Identity -->
            <option value="IdentityChange">Identity Change</option>
            <!-- Errors -->
            <option value="CATRefreshError">CAT Refresh Error</option>
            <!-- Newsletter (WhatsApp Channels) -->
            <option value="NewsletterJoin">Newsletter Join</option>
            <option value="NewsletterLeave">Newsletter Leave</option>
            <option value="NewsletterMuteChange">Newsletter Mute Change</option>
            <option value="NewsletterLiveUpdate">Newsletter Live Update</option>
            <!-- Facebook/Meta Bridge -->
            <option value="FBMessage">FB Message</option>
            <!-- Special -->
            <option value="All">All Events</option>
          </select>
        </div>
        <div class="field"><label>Webhook URL</label><input id="webhookinput" type="text" placeholder="Type webhook URL"></div>
      </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button">Set<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- S3 Configuration Modal -->
  <div class="ui modal" id="modalS3Config"><i class="close icon"></i>
    <div class="header"> S3 Configuration </div>
    <div class="content">
      <div class="ui info message">
        <div class="header">S3 Storage Configuration</div>
        <p>Configure S3-compatible storage for media files. This includes AWS S3, MinIO, DigitalOcean Spaces, and other S3-compatible services.</p>
      </div>
      <div class="ui form">
        <div class="field">
          <label>S3 Endpoint URL</label>
          <input id="s3Endpoint" type="text" placeholder="https://s3.amazonaws.com or custom endpoint">
          <small>For AWS S3, use the default. For MinIO/others, use your custom endpoint.</small>
        </div>
        <div class="field">
          <label>Access Key ID</label>
          <input id="s3AccessKey" type="text" placeholder="Your S3 access key ID">
        </div>
        <div class="field">
          <label>Secret Access Key</label>
          <input id="s3SecretKey" type="password" placeholder="Your S3 secret access key">
        </div>
        <div class="field">
          <label>Bucket Name</label>
          <input id="s3Bucket" type="text" placeholder="Your S3 bucket name">
        </div>
        <div class="field">
          <label>Region</label>
          <input id="s3Region" type="text" placeholder="us-east-1 (optional for some providers)">
          <small>Required for AWS S3. Optional for MinIO and other providers.</small>
        </div>
        <div class="field">
          <label>Public URL (Optional)</label>
          <input id="s3PublicUrl" type="text" placeholder="https://cdn.example.com">
          <small>Public URL for accessing files (if different from endpoint).</small>
        </div>
        <div class="field">
          <label>Media Delivery</label>
          <select class="ui dropdown" id="s3MediaDelivery">
            <option value="base64">Base64 (Default)</option>
            <option value="s3">S3 URL only</option>
            <option value="both">Both Base64 and S3 URL</option>
          </select>
          <small>How media should be delivered in webhook events.</small>
        </div>
        <div class="field">
          <label>Retention Days</label>
          <input id="s3RetentionDays" type="number" min="1" value="30" placeholder="30">
          <small>Number of days to retain files in S3 before deletion.</small>
        </div>
        <div class="field">
          <div class="ui toggle checkbox">
            <input type="checkbox" id="s3ForcePathStyle">
            <label>Force Path Style</label>
          </div>
          <small>Enable for MinIO and some S3-compatible providers.</small>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Cancel</div>
      <div class="ui button" id="testS3Connection">Test Connection</div>
      <div class="ui red button" id="deleteS3Config">Delete Configuration</div>
      <div class="ui positive right labeled icon button" id="saveS3Config">Save<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- History Configuration Modal -->
  <div class="ui modal" id="modalHistoryConfig"><i class="close icon"></i>
    <div class="header"> History Configuration </div>
    <div class="content">
      <div class="ui info message">
        <div class="header">Message History</div>
        <p>Number of messages to keep in history database. Set to zero to disable history.</p>
      </div>
      <div class="ui form">
        <div class="field" id="messageHistoryField">
          <label>History</label>
          <input id="history" type="number" placeholder="0">
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Cancel</div>
      <div class="ui positive right labeled icon button" id="saveProxyConfig">Save<i class="checkmark icon"></i></div>
    </div>
  </div>


  <!-- Proxy Configuration Modal -->
  <div class="ui modal" id="modalProxyConfig"><i class="close icon"></i>
    <div class="header"> Proxy Configuration </div>
    <div class="content">
      <div class="ui info message">
        <div class="header">Proxy Settings</div>
        <p>Configure HTTP/HTTPS or SOCKS5 proxy for WhatsApp connections. Useful for network restrictions or enhanced privacy.</p>
      </div>
      <div class="ui form">
        <div class="field">
          <div class="ui toggle checkbox" id="proxyEnabledToggle">
            <input type="checkbox" id="proxyEnabled">
            <label>Enable Proxy</label>
          </div>
          <small>Enable or disable proxy for this instance.</small>
        </div>
        <div class="field" id="proxyUrlField">
          <label>Proxy URL</label>
          <input id="proxyUrl" type="text" placeholder="http://proxy.example.com:8080 or socks5://user:pass@proxy.example.com:1080">
          <small>Include protocol (http://, https://, or socks5://) and port. Authentication can be included in URL format.</small>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Cancel</div>
      <div class="ui positive right labeled icon button" id="saveProxyConfig">Save<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- HMAC Configuration Modal -->
  <div class="ui modal" id="modalHmacConfig"><i class="close icon"></i>
    <div class="header"> HMAC Configuration </div>
    <div class="content">
      <div class="ui info message">
        <div class="header">HMAC Key Settings</div>
        <p>Configure HMAC key for webhook security. This key will be used to verify webhook authenticity.</p>
      </div>
      <div class="ui warning message">
        <div class="header">Important Security Notice</div>
        <p>
          <strong>The HMAC key will be hidden after saving for security reasons.</strong><br>
          • You won't be able to view it again<br>
          • Save a copy in a secure location before proceeding<br>
          • If lost, you'll need to generate a new key
        </p>
      </div>
      <div class="ui form">
        <div class="field">
          <label>HMAC Key</label>
          <input id="hmacKey" type="password" placeholder="Enter your HMAC key (minimum 32 characters)">
          <small>Minimum 32 characters for security. Keep this key secret!</small>
        </div>
        <div class="field">
          <div class="ui buttons">
            <button class="ui primary button" id="generateHmacKey">
              <i class="random icon"></i> Generate Random Key
            </button>
            <button class="ui black button" id="showHmacKey">
              <i class="eye icon"></i> Show Key
            </button>
            <button class="ui black button" id="hideHmacKey" style="display: none;">
              <i class="eye slash icon"></i> Hide Key
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Cancel</div>
      <div class="ui red button" id="deleteHmacConfig">Delete Configuration</div>
      <div class="ui positive right labeled icon button" id="saveHmacConfig">Save<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Add Instance Modal -->
  <div class="ui large modal" id="addInstanceModal">
    <i class="close icon"></i>
    <div class="header">Add New Instance</div>
    <div class="content">
      <form class="ui form" id="addInstanceForm">
        <!-- Basic Configuration -->
        <h4 class="ui dividing header">Basic Configuration</h4>
        <div class="field">
          <label>Name <span class="required">*</span></label>
          <input type="text" name="name" placeholder="Instance name" required>
        </div>
        <div class="field">
          <label>Token <span class="required">*</span></label>
          <input type="text" name="token" placeholder="Authentication Token" required>
        </div>
        <div class="field">
          <label>Webhook URL</label>
          <input type="url" name="webhook_url" placeholder="https://example.com/webhook">
        </div>
        <div class="field">
          <label>Events <span class="required">*</span></label>
          <select name="events" id="webhookEventsInstance" class="ui fluid dropdown" multiple="" required>
            <option value="">Select Events</option>
            <!-- Messages and Communication -->
            <option value="Message">Message</option>
            <option value="UndecryptableMessage">Undecryptable Message</option>
            <option value="Receipt">Receipt</option>
            <option value="MediaRetry">Media Retry</option>
            <!-- Groups and Contacts -->
            <option value="GroupInfo">Group Info</option>
            <option value="JoinedGroup">Joined Group</option>
            <option value="Picture">Picture</option>
            <option value="BlocklistChange">Blocklist Change</option>
            <option value="Blocklist">Blocklist</option>
            <!-- Connection and Session -->
            <option value="Connected">Connected</option>
            <option value="Disconnected">Disconnected</option>
            <option value="ConnectFailure">Connect Failure</option>
            <option value="KeepAliveRestored">Keep Alive Restored</option>
            <option value="KeepAliveTimeout">Keep Alive Timeout</option>
            <option value="LoggedOut">Logged Out</option>
            <option value="ClientOutdated">Client Outdated</option>
            <option value="TemporaryBan">Temporary Ban</option>
            <option value="StreamError">Stream Error</option>
            <option value="StreamReplaced">Stream Replaced</option>
            <option value="PairSuccess">Pair Success</option>
            <option value="PairError">Pair Error</option>
            <option value="QR">QR</option>
            <option value="QRScannedWithoutMultidevice">QR Scanned Without Multidevice</option>
            <!-- Privacy and Settings -->
            <option value="PrivacySettings">Privacy Settings</option>
            <option value="PushNameSetting">Push Name Setting</option>
            <option value="UserAbout">User About</option>
            <!-- Synchronization and State -->
            <option value="AppState">App State</option>
            <option value="AppStateSyncComplete">App State Sync Complete</option>
            <option value="HistorySync">History Sync</option>
            <option value="OfflineSyncCompleted">Offline Sync Completed</option>
            <option value="OfflineSyncPreview">Offline Sync Preview</option>
            <!-- Calls -->
            <option value="CallOffer">Call Offer</option>
            <option value="CallAccept">Call Accept</option>
            <option value="CallTerminate">Call Terminate</option>
            <option value="CallOfferNotice">Call Offer Notice</option>
            <option value="CallRelayLatency">Call Relay Latency</option>
            <!-- Presence and Activity -->
            <option value="Presence">Presence</option>
            <option value="ChatPresence">Chat Presence</option>
            <!-- Identity -->
            <option value="IdentityChange">Identity Change</option>
            <!-- Errors -->
            <option value="CATRefreshError">CAT Refresh Error</option>
            <!-- Newsletter (WhatsApp Channels) -->
            <option value="NewsletterJoin">Newsletter Join</option>
            <option value="NewsletterLeave">Newsletter Leave</option>
            <option value="NewsletterMuteChange">Newsletter Mute Change</option>
            <option value="NewsletterLiveUpdate">Newsletter Live Update</option>
            <!-- Facebook/Meta Bridge -->
            <option value="FBMessage">FB Message</option>
            <!-- Special -->
            <option value="All">All Events</option>
          </select>
        </div>
        <div class="field">
          <label>Message History</label>
          <input type="number" name="history" min="0" value="0" placeholder="0">
          <small>Number of messages to store in history per chat for this instance. Set to 0 to disable message history.</small>
        </div>

        <!-- Proxy Configuration -->
        <h4 class="ui dividing header">Proxy Configuration (Optional)</h4>
        <div class="field">
          <div class="ui toggle checkbox" id="addInstanceProxyToggle">
            <input type="checkbox" name="proxy_enabled">
            <label>Enable Proxy</label>
          </div>
          <small>Enable proxy for this instance</small>
        </div>
        <div class="field" id="addInstanceProxyUrlField" style="display: none;">
          <label>Proxy URL</label>
          <input type="text" name="proxy_url" placeholder="http://proxy.example.com:8080 or socks5://user:pass@proxy.example.com:1080">
          <small>Include protocol (http://, https://, or socks5://) and port. Authentication can be included in URL format.</small>
        </div>

        <!-- S3 Configuration -->
        <h4 class="ui dividing header">S3 Storage Configuration (Optional)</h4>
        <div class="field">
          <div class="ui toggle checkbox" id="addInstanceS3Toggle">
            <input type="checkbox" name="s3_enabled">
            <label>Enable S3 Storage</label>
          </div>
          <small>Enable S3-compatible storage for media files</small>
        </div>
        <div id="addInstanceS3Fields" style="display: none;">
          <div class="field">
            <label>S3 Endpoint URL</label>
            <input type="text" name="s3_endpoint" placeholder="https://s3.amazonaws.com or custom endpoint">
            <small>For AWS S3, leave empty or use default. For MinIO/others, use your custom endpoint.</small>
          </div>
          <div class="two fields">
            <div class="field">
              <label>Access Key ID</label>
              <input type="text" name="s3_access_key" placeholder="Your S3 access key ID">
            </div>
            <div class="field">
              <label>Secret Access Key</label>
              <input type="password" name="s3_secret_key" placeholder="Your S3 secret access key">
            </div>
          </div>
          <div class="two fields">
            <div class="field">
              <label>Bucket Name</label>
              <input type="text" name="s3_bucket" placeholder="Your S3 bucket name">
            </div>
            <div class="field">
              <label>Region</label>
              <input type="text" name="s3_region" placeholder="us-east-1">
              <small>Required for AWS S3. Optional for MinIO and other providers.</small>
            </div>
          </div>
          <div class="field">
            <label>Public URL (Optional)</label>
            <input type="text" name="s3_public_url" placeholder="https://cdn.example.com">
            <small>Public URL for accessing files (if different from endpoint).</small>
          </div>
          <div class="two fields">
            <div class="field">
              <label>Media Delivery</label>
              <select class="ui dropdown" name="s3_media_delivery" id="addInstanceS3MediaDelivery">
                <option value="base64">Base64 (Default)</option>
                <option value="s3">S3 URL only</option>
                <option value="both">Both Base64 and S3 URL</option>
              </select>
              <small>How media should be delivered in webhook events.</small>
            </div>
            <div class="field">
              <label>Retention Days</label>
              <input type="number" name="s3_retention_days" min="1" value="30" placeholder="30">
              <small>Number of days to retain files in S3 before deletion.</small>
            </div>
          </div>
          <div class="field">
            <div class="ui toggle checkbox">
              <input type="checkbox" name="s3_path_style">
              <label>Force Path Style</label>
            </div>
            <small>Enable for MinIO and some S3-compatible providers.</small>
          </div>
        </div>

        <!-- HMAC Configuration -->
        <h4 class="ui dividing header">HMAC Configuration (Optional)</h4>
        <div class="field">
          <div class="ui toggle checkbox" id="addInstanceHmacToggle">
            <input type="checkbox" name="hmac_enabled">
            <label>Enable HMAC Key</label>
          </div>
          <small>Enable HMAC key for webhook security</small>
        </div>
        <div class="ui warning message" id="addInstanceHmacKeyWarningMessage" style="display: none;">
          <div class="header">Important Security Notice</div>
          <p>
            <strong>The HMAC key will be hidden after saving for security reasons.</strong><br>
            • You won't be able to view it again<br>
            • Save a copy in a secure location before proceeding<br>
            • If lost, you'll need to generate a new key
          </p>
        </div>
        <div class="field"
         id="addInstanceHmacKeyField" style="display: none;">
          <label>HMAC Key</label>
          <input type="password" name="hmac_key" placeholder="Enter HMAC key (minimum 32 characters)">
          <small>Minimum 32 characters for security. Keep this key secret!</small>
          <div class="ui buttons" style="margin-top: 10px;">
            <button type="button" class="ui primary button" id="generateHmacKeyInstance">
              <i class="random icon"></i> Generate Random Key
            </button>
            <button type="button" class="ui black button" id="showHmacKeyInstance">
              <i class="eye icon"></i> Show Key
            </button>
            <button type="button" class="ui black button" id="hideHmacKeyInstance" style="display: none;">
              <i class="eye slash icon"></i> Hide Key
            </button>
          </div>
        </div>

        <div class="ui error message"></div>
      </form>
    </div>
    <div class="actions">
      <button class="ui black deny button">Cancel</button>
      <button type="submit" form="addInstanceForm" class="ui positive right labeled icon button">
        Submit
        <i class="checkmark icon"></i>
      </button>
    </div>
  </div>

  <!-- Chatwoot Configuration Modal -->
  <div class="ui modal" id="modalChatwootConfig"><i class="close icon"></i>
    <div class="header">Chatwoot Integration</div>
    <div class="content">
      <form class="ui form" id="chatwootConfigForm">
        <div class="field">
          <div class="ui toggle checkbox" id="chatwootEnabledToggle">
            <input type="checkbox" name="enabled" id="chatwootEnabled">
            <label>Enable Chatwoot Integration</label>
          </div>
          <small>Enable integration with Chatwoot for customer support</small>
        </div>

        <div id="chatwootConfigFields" style="display: none;">
          <div class="field">
            <label>Chatwoot URL <span class="required">*</span></label>
            <input type="url" name="url" id="chatwootUrl" placeholder="https://your-chatwoot-instance.com" required>
            <small>Base URL of your Chatwoot instance (without trailing slash)</small>
          </div>

          <div class="field">
            <label>API Access Token <span class="required">*</span></label>
            <input type="password" name="token" id="chatwootToken" placeholder="Enter API access token" required>
            <small>API access token from Chatwoot settings</small>
            <div class="ui buttons" style="margin-top: 10px;">
              <button type="button" class="ui black button" id="showChatwootToken">
                <i class="eye icon"></i> Show Token
              </button>
              <button type="button" class="ui black button" id="hideChatwootToken" style="display: none;">
                <i class="eye slash icon"></i> Hide Token
              </button>
            </div>
          </div>

          <div class="field">
            <label>Inbox ID <span class="required">*</span></label>
            <input type="number" name="account_id" id="chatwootAccountId" placeholder="1" min="1" required>
            <small>Chatwoot Inbox ID (not Account ID). Find it in Settings → Inboxes → Your WhatsApp Inbox → Settings. The ID is in the URL or API response.</small>
          </div>

          <div class="ui info message">
            <div class="header">How to get your Chatwoot credentials:</div>
            <ol class="ui list">
              <li>Log in to your Chatwoot instance</li>
              <li>Go to Settings → Applications → API Tokens</li>
              <li>Create a new API access token</li>
              <li>Copy the token and paste it above</li>
              <li><strong>Important:</strong> You need the <strong>Inbox ID</strong>, not Account ID. Go to Settings → Inboxes → Select your WhatsApp inbox → The ID is in the URL (e.g., /inboxes/1) or check the API response</li>
            </ol>
          </div>
        </div>

        <div id="chatwootConfigContainer" class="hidden"></div>
      </form>
    </div>
    <div class="actions">
      <button class="ui black deny button">Cancel</button>
      <button type="button" class="ui negative button" id="deleteChatwootConfigBtn" style="display: none;">
        <i class="trash icon"></i> Delete Configuration
      </button>
      <button type="submit" form="chatwootConfigForm" class="ui positive right labeled icon button">
        Save Configuration
        <i class="checkmark icon"></i>
      </button>
    </div>
  </div>

  <!-- Instance Delete Confirmation Modal -->

  <div class="ui small modal" id="deleteInstanceModal">
    <div class="header">Delete Instance</div>
    <div class="content">
      <p>Are you sure you want to delete this instance? This action cannot be undone.</p>
    </div>
    <div class="actions">
      <div class="ui negative button">No</div>
      <div class="ui positive right labeled icon button" id="confirmDeleteButton">
        Yes
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- User Modals -->

  <div class="ui modal" id="modalUserInfo"><i class="close icon"></i>
    <div class="header"> User Info </div>
    <div class="content">
      <div class="ui message info hidden" id="userInfoContainer"></div>
      <div class="ui form">
        <div class="field"><label>Phone</label><input id="userinfoinput" type="text" placeholder="Type phone number"></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button">Get Info<i class="checkmark icon"></i></div>
    </div>
  </div>

  <div class="ui modal" id="modalUserAvatar"><i class="close icon"></i>
    <div class="header"> User Avatar </div>
    <div class="content">
      <div class="ui message info hidden" id="userAvatarContainer"></div>
      <div class="ui form">
        <div class="field"><label>Phone</label><input id="useravatarinput" type="text" placeholder="Type phone number"></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button">Get Avatar<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Message Modals -->

  <div class="ui modal" id="modalSendTextMessage"><i class="close icon"></i>
    <div class="header"> Send Text Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendTextContainer"></div>
      <div class="ui form" id="sendTextForm">
        <div class="field"><label>Phone</label><input id="messagesendphone" type="text" placeholder="Type phone number"></div>
        <div class="field"><label>Message</label><textarea id="messagesendtext"></textarea></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendTextSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <div class="ui modal" id="modalDeleteMessage"><i class="close icon"></i>
    <div class="header"> Delete Message </div>
    <div class="content">
      <div class="ui message info hidden" id="deleteMessageContainer"></div>
      <div class="ui form" id="deleteMessageForm">
        <div class="field"><label>Phone</label><input id="messagedeletephone" type="text" placeholder="Type phone number"></div>
        <div class="field"><label>Message ID</label><input id="messagedeleteid" type="text" placeholder="Type the message id"></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="deleteMessageSubmit">Delete<i class="trash icon"></i></div>
    </div>
  </div>

  <!-- Send Buttons Message Modal -->
  <div class="ui modal" id="modalSendButtonsMessage"><i class="close icon"></i>
    <div class="header"> Send Buttons Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendButtonsContainer"></div>
      <div class="ui form" id="sendButtonsForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="buttonssendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Title (Optional)</label>
          <input id="buttonssendtitle" type="text" placeholder="Title that appears at the top" maxlength="60">
          <small>Title text that appears at the top (max 60 characters, optional)</small>
        </div>
        <div class="field">
          <label>Message Text <span class="required">*</span></label>
          <textarea id="buttonssendtext" placeholder="Message text that will appear above the buttons" rows="3" required></textarea>
          <small>This is the message that appears above the buttons (max 1024 characters)</small>
        </div>
        <div class="field">
          <label>Footer Text (Optional)</label>
          <input id="buttonssendfooter" type="text" placeholder="Footer text" maxlength="60">
          <small>Footer text that appears below the buttons (max 60 characters, optional)</small>
        </div>
        <div class="field">
          <label>Buttons <span class="required">*</span></label>
          <div class="ui info message">
            <i class="info circle icon"></i> You can add up to 5 buttons. Each button text must be up to 20 characters. Choose button type: ID (response), Phone Number, or URL.
          </div>
          <div id="buttonsContainer">
            <div class="button-field">
              <div class="field">
                <label>Button Type <span class="required">*</span></label>
                <select class="ui dropdown button-type" required>
                  <option value="id">ID (Response Button)</option>
                  <option value="phoneNumber">Phone Number</option>
                  <option value="url">URL</option>
                </select>
                <small>Type of button action</small>
              </div>
              <div class="field button-id-field">
                <label>Button ID</label>
                <input type="text" class="button-id" placeholder="unique-id-1" maxlength="256">
                <small>Unique identifier for response button</small>
              </div>
              <div class="field button-phone-field" style="display: none;">
                <label>Phone Number <span class="required">*</span></label>
                <input type="text" class="button-phone" placeholder="5521989848442" maxlength="20">
                <small>Phone number to call (with country code, no +)</small>
              </div>
              <div class="field button-url-field" style="display: none;">
                <label>URL <span class="required">*</span></label>
                <input type="url" class="button-url" placeholder="https://example.com" maxlength="500">
                <small>URL to open when button is clicked</small>
              </div>
              <div class="field">
                <label>Button Text <span class="required">*</span></label>
                <input type="text" class="button-text" placeholder="Button Label" maxlength="20" required>
                <small>Text displayed on button (max 20 chars)</small>
              </div>
            </div>
          </div>
          <button type="button" class="ui button" id="addButtonBtn">
            <i class="plus icon"></i> Add Button
          </button>
          <button type="button" class="ui button" id="removeButtonBtn" style="display: none;">
            <i class="minus icon"></i> Remove Last Button
          </button>
        </div>
        <div class="ui error message"></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendButtonsSubmit">
        Send
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Send List Message Modal -->
  <div class="ui large modal" id="modalSendListMessage"><i class="close icon"></i>
    <div class="header"> Send List Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendListContainer"></div>
      <div class="ui form" id="sendListForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="listsendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Title <span class="required">*</span></label>
          <input id="listsendtitle" type="text" placeholder="List title" maxlength="60" required>
          <small>Title of the list (max 60 characters)</small>
        </div>
        <div class="field">
          <label>Description <span class="required">*</span></label>
          <textarea id="listsenddesc" placeholder="List description" rows="2" maxlength="72" required></textarea>
          <small>Description text (max 72 characters)</small>
        </div>
        <div class="field">
          <label>Button Text / Title List Button <span class="required">*</span></label>
          <input id="listsendbuttontext" type="text" placeholder="SELECIONE UMA OPÇÃO" maxlength="20" required>
          <small>Text on the button that opens the list (max 20 characters)</small>
        </div>
        <div class="field">
          <label>Footer Text (Optional)</label>
          <input id="listsendfooter" type="text" placeholder="Footer text" maxlength="60">
          <small>Footer text (max 60 characters, optional)</small>
        </div>
        <div class="ui divider"></div>
        <h4 class="ui dividing header">List Items</h4>
        <div class="ui info message">
          <i class="info circle icon"></i> You can add up to 10 items per section. You can have multiple sections with different titles.
        </div>
        <div id="listSectionsContainer">
          <div class="list-section">
            <div class="field">
              <label>Section Title</label>
              <input type="text" class="section-title" placeholder="Section Name" maxlength="24">
            </div>
            <div class="list-items-container">
              <div class="three fields list-item-field">
                <div class="field">
                  <label>Row ID</label>
                  <input type="text" class="row-id" placeholder="item1" maxlength="200">
                  <small>Unique identifier</small>
                </div>
                <div class="field">
                  <label>Title</label>
                  <input type="text" class="row-title" placeholder="Item Title" maxlength="24" required>
                  <small>Item title (max 24 chars)</small>
                </div>
                <div class="field">
                  <label>Description</label>
                  <input type="text" class="row-desc" placeholder="Item description" maxlength="72">
                  <small>Optional description (max 72 chars)</small>
                </div>
              </div>
            </div>
            <button type="button" class="ui small button add-list-item-btn">
              <i class="plus icon"></i> Add Item to Section
            </button>
            <button type="button" class="ui small button remove-list-item-btn" style="display: none;">
              <i class="minus icon"></i> Remove Last Item
            </button>
          </div>
        </div>
        <button type="button" class="ui button" id="addSectionBtn">
          <i class="plus icon"></i> Add Section
        </button>
        <button type="button" class="ui button" id="removeSectionBtn" style="display: none;">
          <i class="minus icon"></i> Remove Last Section
        </button>
        <div class="ui error message"></div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendListSubmit">
        Send
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Send Image Modal -->
  <div class="ui modal" id="modalSendImage"><i class="close icon"></i>
    <div class="header"> Send Image Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendImageContainer"></div>
      <div class="ui form" id="sendImageForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="imagesendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Image URL or Base64 <span class="required">*</span></label>
          <textarea id="imagesendurl" placeholder="Image URL or base64 data" rows="3" required></textarea>
        </div>
        <div class="field">
          <label>Caption (Optional)</label>
          <textarea id="imagesendcaption" placeholder="Image caption" rows="2"></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendImageSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Audio Modal -->
  <div class="ui modal" id="modalSendAudio"><i class="close icon"></i>
    <div class="header"> Send Audio Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendAudioContainer"></div>
      <div class="ui form" id="sendAudioForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="audiosendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Audio URL or Base64 <span class="required">*</span></label>
          <textarea id="audiosendurl" placeholder="Audio URL or base64 data" rows="3" required></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendAudioSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Video Modal -->
  <div class="ui modal" id="modalSendVideo"><i class="close icon"></i>
    <div class="header"> Send Video Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendVideoContainer"></div>
      <div class="ui form" id="sendVideoForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="videosendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Video URL or Base64 <span class="required">*</span></label>
          <textarea id="videosendurl" placeholder="Video URL or base64 data" rows="3" required></textarea>
        </div>
        <div class="field">
          <label>Caption (Optional)</label>
          <textarea id="videosendcaption" placeholder="Video caption" rows="2"></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendVideoSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Document Modal -->
  <div class="ui modal" id="modalSendDocument"><i class="close icon"></i>
    <div class="header"> Send Document Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendDocumentContainer"></div>
      <div class="ui form" id="sendDocumentForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="documentsendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Document URL or Base64 <span class="required">*</span></label>
          <textarea id="documentsendurl" placeholder="Document URL or base64 data" rows="3" required></textarea>
        </div>
        <div class="field">
          <label>File Name <span class="required">*</span></label>
          <input id="documentsendfilename" type="text" placeholder="document.pdf" required>
        </div>
        <div class="field">
          <label>Caption (Optional)</label>
          <textarea id="documentsendcaption" placeholder="Document caption" rows="2"></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendDocumentSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Sticker Modal -->
  <div class="ui modal" id="modalSendSticker"><i class="close icon"></i>
    <div class="header"> Send Sticker Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendStickerContainer"></div>
      <div class="ui form" id="sendStickerForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="stickersendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Sticker URL or Base64 <span class="required">*</span></label>
          <textarea id="stickersendurl" placeholder="Sticker URL or base64 data (must be WebP format)" rows="3" required></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendStickerSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Location Modal -->
  <div class="ui modal" id="modalSendLocation"><i class="close icon"></i>
    <div class="header"> Send Location Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendLocationContainer"></div>
      <div class="ui form" id="sendLocationForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="locationsendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="two fields">
          <div class="field">
            <label>Latitude <span class="required">*</span></label>
            <input id="locationsendlat" type="number" step="any" placeholder="-23.5505" required>
          </div>
          <div class="field">
            <label>Longitude <span class="required">*</span></label>
            <input id="locationsendlng" type="number" step="any" placeholder="-46.6333" required>
          </div>
        </div>
        <div class="field">
          <label>Name (Optional)</label>
          <input id="locationsendname" type="text" placeholder="Location name">
        </div>
        <div class="field">
          <label>Address (Optional)</label>
          <input id="locationsendaddress" type="text" placeholder="Full address">
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendLocationSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Contact Modal -->
  <div class="ui modal" id="modalSendContact"><i class="close icon"></i>
    <div class="header"> Send Contact Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendContactContainer"></div>
      <div class="ui form" id="sendContactForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="contactsendphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Contact Phone <span class="required">*</span></label>
          <input id="contactsendcontactphone" type="text" placeholder="5516999999999" required>
        </div>
        <div class="field">
          <label>Contact Name <span class="required">*</span></label>
          <input id="contactsendname" type="text" placeholder="Contact name" required>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendContactSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Send Poll Modal -->
  <div class="ui modal" id="modalSendPoll"><i class="close icon"></i>
    <div class="header"> Send Poll Message </div>
    <div class="content">
      <div class="ui message info hidden" id="sendPollContainer"></div>
      <div class="ui form" id="sendPollForm">
        <div class="field">
          <label>Group JID <span class="required">*</span></label>
          <input id="pollsendgroup" type="text" placeholder="120363123456789012@g.us" required>
          <small>Polls can only be sent to groups</small>
        </div>
        <div class="field">
          <label>Poll Question <span class="required">*</span></label>
          <input id="pollsendsubject" type="text" placeholder="What is your favorite color?" required>
        </div>
        <div class="field">
          <label>Poll Options <span class="required">*</span></label>
          <div id="pollOptionsContainer">
            <div class="two fields">
              <div class="field">
                <input type="text" class="poll-option" placeholder="Option 1" required>
              </div>
              <div class="field">
                <input type="text" class="poll-option" placeholder="Option 2" required>
              </div>
            </div>
          </div>
          <button type="button" class="ui small button" id="addPollOption">Add Option</button>
          <small>Minimum 2 options, maximum 12 options</small>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="sendPollSubmit">Send<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- React to Message Modal -->
  <div class="ui modal" id="modalReactMessage"><i class="close icon"></i>
    <div class="header"> React to Message </div>
    <div class="content">
      <div class="ui message info hidden" id="reactMessageContainer"></div>
      <div class="ui form" id="reactMessageForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="reactphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Message ID <span class="required">*</span></label>
          <input id="reactmessageid" type="text" placeholder="Message ID" required>
        </div>
        <div class="field">
          <label>Emoji <span class="required">*</span></label>
          <input id="reactemoji" type="text" placeholder="👍" maxlength="2" required>
          <small>Single emoji (e.g., 👍, ❤️, 😂)</small>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="reactMessageSubmit">React<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Mark as Read Modal -->
  <div class="ui modal" id="modalMarkRead"><i class="close icon"></i>
    <div class="header"> Mark Message as Read </div>
    <div class="content">
      <div class="ui message info hidden" id="markReadContainer"></div>
      <div class="ui form" id="markReadForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="markreadphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Message ID <span class="required">*</span></label>
          <input id="markreadmessageid" type="text" placeholder="Message ID" required>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="markReadSubmit">Mark as Read<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Edit Message Modal -->
  <div class="ui modal" id="modalEditMessage"><i class="close icon"></i>
    <div class="header"> Edit Message </div>
    <div class="content">
      <div class="ui message info hidden" id="editMessageContainer"></div>
      <div class="ui form" id="editMessageForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="editphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Message ID <span class="required">*</span></label>
          <input id="editmessageid" type="text" placeholder="Message ID" required>
        </div>
        <div class="field">
          <label>New Text <span class="required">*</span></label>
          <textarea id="editnewtext" placeholder="New message text" rows="3" required></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="editMessageSubmit">Edit<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Chat Presence Modal -->
  <div class="ui modal" id="modalChatPresence"><i class="close icon"></i>
    <div class="header"> Set Chat Presence </div>
    <div class="content">
      <div class="ui message info hidden" id="chatPresenceContainer"></div>
      <div class="ui form" id="chatPresenceForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="chatpresencephone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <label>Presence Type <span class="required">*</span></label>
          <select id="chatpresencetype" class="ui dropdown" required>
            <option value="">Select presence type</option>
            <option value="composing">Typing (Composing)</option>
            <option value="recording">Recording Audio</option>
            <option value="paused">Paused</option>
            <option value="available">Available</option>
            <option value="unavailable">Unavailable</option>
          </select>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="chatPresenceSubmit">Set<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Archive Chat Modal -->
  <div class="ui modal" id="modalArchiveChat"><i class="close icon"></i>
    <div class="header"> Archive/Unarchive Chat </div>
    <div class="content">
      <div class="ui message info hidden" id="archiveChatContainer"></div>
      <div class="ui form" id="archiveChatForm">
        <div class="field">
          <label>Phone <span class="required">*</span></label>
          <input id="archivechatphone" type="text" placeholder="Type phone number" required>
        </div>
        <div class="field">
          <div class="ui toggle checkbox">
            <input type="checkbox" id="archivechatarchive">
            <label>Archive (uncheck to unarchive)</label>
          </div>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="archiveChatSubmit">Archive<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Set Status Modal -->
  <div class="ui modal" id="modalSetStatus"><i class="close icon"></i>
    <div class="header"> Set Status Message </div>
    <div class="content">
      <div class="ui message info hidden" id="setStatusContainer"></div>
      <div class="ui form" id="setStatusForm">
        <div class="field">
          <label>Status Text <span class="required">*</span></label>
          <textarea id="setstatustext" placeholder="Your status message" rows="3" required></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="setStatusSubmit">Set Status<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Reject Call Modal -->
  <div class="ui modal" id="modalRejectCall"><i class="close icon"></i>
    <div class="header"> Reject Call </div>
    <div class="content">
      <div class="ui message info hidden" id="rejectCallContainer"></div>
      <div class="ui form" id="rejectCallForm">
        <div class="field">
          <label>Call ID <span class="required">*</span></label>
          <input id="rejectcallid" type="text" placeholder="Call ID" required>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui cancel button secondary">Close</div>
      <div class="ui positive right labeled icon button" id="rejectCallSubmit">Reject<i class="checkmark icon"></i></div>
    </div>
  </div>

  <!-- Groups Modals -->

  <!-- Group Details Modal -->
  <div class="ui large modal" id="modalGroupDetails">
    <i class="close icon"></i>
    <div class="header">
      <i class="users icon"></i>
      <span id="groupDetailsTitle">Group Details</span>
    </div>
    <div class="content">
      <div class="ui stackable grid">
        <div class="sixteen wide column">
          <div class="ui relaxed list">
            <div class="item">
              <div class="header">Group Name</div>
              <div id="groupDetailsName">-</div>
            </div>
            <div class="item">
              <div class="header">Description</div>
              <div id="groupDetailsDescription">-</div>
            </div>
            <div class="item">
              <div class="header">Participants</div>
              <div id="groupDetailsParticipants">-</div>
            </div>
            <div class="item">
              <div class="header">Created</div>
              <div id="groupDetailsCreated">-</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Participants List -->
      <div class="ui divider"></div>
      <h4 class="ui header">
        <i class="users icon"></i>
        Participants
      </h4>
      <div class="ui relaxed divided list" id="groupParticipantsList">
        <!-- Participants will be populated here -->
      </div>
    </div>
    <div class="actions">
      <div class="ui stackable grid">
        <!-- Basic Actions -->
        <div class="eight wide column">
          <h5 class="ui header">Basic Actions</h5>
          <div class="ui fluid buttons">
            <button class="ui blue button" id="editGroupInfoBtn">
              <i class="edit icon"></i> Edit Info
        </button>
            <button class="ui green button" id="manageParticipantsBtn">
              <i class="users icon"></i> Participants
        </button>
          </div>
        </div>
        
        <!-- Admin Actions -->
        <div class="eight wide column" id="adminActionsSection" style="display: none;">
          <h5 class="ui header">Admin Actions</h5>
          <div class="ui fluid buttons">
            <button class="ui orange button" id="groupSettingsBtn">
          <i class="settings icon"></i> Settings
        </button>
            <button class="ui purple button" id="groupInviteLinkBtn">
              <i class="linkify icon"></i> Invite Link
            </button>
          </div>
        </div>
        
        <!-- Danger Zone -->
        <div class="sixteen wide column">
          <div class="ui divider"></div>
          <h5 class="ui red header">Danger Zone</h5>
          <button class="ui red button fluid" id="leaveGroupBtn">
          <i class="sign out icon"></i> Leave Group
        </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Group Modal -->
  <div class="ui modal" id="modalCreateGroup">
    <i class="close icon"></i>
    <div class="header">
      <i class="plus icon"></i>
      Create New Group
    </div>
    <div class="content">
      <form class="ui form" id="createGroupForm">
        <div class="field">
          <label>Group Name <span class="required">*</span></label>
          <input type="text" name="groupName" placeholder="Enter group name" required maxlength="25">
        </div>
        <div class="field">
          <label>Participants <span class="required">*</span></label>
          <div class="ui info message" id="contactsStatus" style="display: none;">
            <i class="info circle icon"></i>
            <span id="contactsStatusText">Click "Load Contacts" to populate the participants list.</span>
          </div>
          <div class="ui fluid action input" style="margin-bottom: 10px;">
            <button type="button" class="ui blue button" id="loadContactsBtn">
              <i class="users icon"></i> Load Contacts
            </button>
          </div>
          <div class="ui fluid multiple search selection dropdown" id="participantsDropdown">
            <input type="hidden" name="participants">
            <i class="dropdown icon"></i>
            <div class="default text">Select participants</div>
            <div class="menu">
              <!-- Contacts will be populated here -->
            </div>
          </div>
        </div>
        <div class="ui error message"></div>
      </form>
    </div>
    <div class="actions">
      <div class="ui black deny button">Cancel</div>
      <div class="ui positive right labeled icon button" id="createGroupSubmit">
        Create Group
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Join Group Modal -->
  <div class="ui modal" id="modalJoinGroup">
    <i class="close icon"></i>
    <div class="header">
      <i class="add user icon"></i>
      Join Group
    </div>
    <div class="content">
      <form class="ui form" id="joinGroupForm">
        <div class="field">
          <label>Invite Link or Code</label>
          <input type="text" name="inviteCode" placeholder="Paste invite link or enter code" required>
          <div class="ui description">
            Paste the full WhatsApp invite link or just the invite code
          </div>
        </div>
        <div class="ui info message hidden" id="groupPreviewContainer">
          <div class="header">Group Preview</div>
          <div id="groupPreviewContent">
            <!-- Group preview will be shown here -->
          </div>
        </div>
        <div class="ui error message"></div>
      </form>
    </div>
    <div class="actions">
      <div class="ui black deny button">Cancel</div>
      <div class="ui button" id="previewGroupBtn">
        <i class="eye icon"></i> Preview Group
      </div>
      <div class="ui positive right labeled icon button" id="joinGroupSubmit">
        Join Group
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Edit Group Modal -->
  <div class="ui modal" id="modalEditGroup">
    <i class="close icon"></i>
    <div class="header">
      <i class="edit icon"></i>
      Edit Group
    </div>
    <div class="content">
      <form class="ui form" id="editGroupForm">
        <div class="field">
          <label>Group Name</label>
          <input type="text" name="editGroupName" placeholder="Enter group name" maxlength="25">
        </div>
        <div class="field">
          <label>Group Description</label>
          <textarea name="editGroupDescription" placeholder="Enter group description" rows="3"></textarea>
        </div>
        <div class="field">
          <label>Group Photo</label>
          <div class="ui segment">
            <div class="ui stackable grid">
              <div class="four wide column center aligned">
                <img id="currentGroupPhoto" class="ui small circular image" src="" alt="Current Photo" style="display: none;">
                <div id="noCurrentPhoto" class="ui icon header">
                  <i class="users icon"></i>
                  No Photo
                </div>
              </div>
              <div class="twelve wide column">
                <div class="ui buttons">
                  <button type="button" class="ui button" id="changePhotoBtn">
                    <i class="camera icon"></i> Change Photo
                  </button>
                  <button type="button" class="ui negative button" id="removePhotoBtn">
                    <i class="trash icon"></i> Remove Photo
                  </button>
                </div>
                <input type="file" id="editGroupPhotoInput" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
        </div>
        <div class="ui error message"></div>
      </form>
    </div>
    <div class="actions">
      <div class="ui black deny button">Cancel</div>
      <div class="ui positive right labeled icon button" id="saveGroupChanges">
        Save Changes
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Group Settings Modal -->
  <div class="ui modal" id="modalGroupSettings">
    <i class="close icon"></i>
    <div class="header">
      <i class="settings icon"></i>
      Group Settings
    </div>
    <div class="content">
      <div class="ui form">
        <h4 class="ui dividing header">Message Permissions</h4>
        <div class="field">
          <div class="ui toggle checkbox" id="announceOnlyToggle">
            <input type="checkbox">
            <label>Only admins can send messages</label>
          </div>
          <div class="ui description">
            When enabled, only group admins can send messages to this group.
          </div>
        </div>
        
        <h4 class="ui dividing header">Group Information</h4>
        <div class="field">
          <div class="ui toggle checkbox" id="editInfoToggle">
            <input type="checkbox">
            <label>Only admins can edit group info</label>
          </div>
          <div class="ui description">
            When enabled, only group admins can edit group name, description, and photo.
          </div>
        </div>
        
        <h4 class="ui dividing header">Disappearing Messages</h4>
        <div class="field">
          <label>Message Timer</label>
          <select class="ui dropdown" id="disappearingTimerSelect">
            <option value="off">Off</option>
            <option value="24h">24 hours</option>
            <option value="7d">7 days</option>
            <option value="90d">90 days</option>
          </select>
          <div class="ui description">
            Messages will automatically disappear after the selected time.
          </div>
        </div>

        <h4 class="ui dividing header">Group Photo</h4>
        <div class="field">
          <div class="ui segment">
            <div class="ui stackable grid">
              <div class="four wide column center aligned">
                <div id="currentGroupPhotoContainer">
                  <div class="ui icon header">
                    <i class="users icon"></i>
                    No Photo
                  </div>
                </div>
              </div>
              <div class="twelve wide column">
                <div class="ui buttons">
                  <button type="button" class="ui button" id="changeGroupPhotoBtn">
                    <i class="camera icon"></i> Change Photo
            </button>
                  <button type="button" class="ui negative button" id="removeGroupPhotoBtn">
                    <i class="trash icon"></i> Remove Photo
            </button>
                </div>
                <input type="file" id="groupPhotoInput" accept="image/*" style="display: none;">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui black deny button">Close</div>
      <div class="ui positive right labeled icon button" id="saveGroupSettingsBtn">
        Save Settings
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Manage Participants Modal -->
  <div class="ui large modal" id="modalManageParticipants">
    <i class="close icon"></i>
    <div class="header">
      <i class="users icon"></i>
      Manage Participants
    </div>
    <div class="content">
      <div class="ui stackable grid">
        <!-- Add Participants Section -->
        <div class="eight wide column">
          <h4 class="ui header">
            <i class="plus icon"></i>
            Add Participants
          </h4>
          <div class="ui form">
            <div class="field">
              <label>Load Contacts</label>
              <button type="button" class="ui blue button fluid" id="loadContactsForParticipantsBtn">
                <i class="users icon"></i> Load Contacts
              </button>
              <div class="ui info message" id="participantsContactsStatus" style="display: none;">
                <span id="participantsContactsStatusText">Click "Load Contacts" to populate the list.</span>
              </div>
            </div>
            <div class="field">
              <label>Select Contacts to Add</label>
              <div class="ui fluid multiple search selection dropdown" id="addParticipantsDropdown">
                <input type="hidden" name="newParticipants">
                <i class="dropdown icon"></i>
                <div class="default text">Select contacts to add</div>
                <div class="menu">
                  <!-- Available contacts will be populated here -->
                </div>
              </div>
            </div>
            <button class="ui green button fluid" id="addParticipantsBtn">
              <i class="plus icon"></i> Add Selected Participants
            </button>
          </div>
        </div>
        
        <!-- Current Participants Section -->
        <div class="eight wide column">
          <h4 class="ui header">
            <i class="users icon"></i>
            Current Participants
          </h4>
          <div class="ui relaxed divided list" id="manageParticipantsList">
            <!-- Current participants will be populated here -->
          </div>
        </div>
      </div>
    </div>
    <div class="actions">
      <div class="ui black deny button">Close</div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="ui small modal" id="confirmationModal">
    <div class="header" id="confirmationTitle">Confirm Action</div>
    <div class="content">
      <p id="confirmationMessage">Are you sure you want to perform this action?</p>
    </div>
    <div class="actions">
      <div class="ui negative button">No</div>
      <div class="ui positive right labeled icon button" id="confirmationYes">
        Yes
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Edit Group Info Modal -->
  <div class="ui modal" id="modalEditGroupInfo">
    <i class="close icon"></i>
    <div class="header">
      <i class="edit icon"></i>
      Edit Group Information
    </div>
    <div class="content">
      <form class="ui form" id="editGroupInfoForm">
        <div class="field">
          <label>Group Name</label>
          <input type="text" name="groupName" id="editGroupNameInput" placeholder="Enter group name" maxlength="25" required>
        </div>
        <div class="field">
          <label>Group Description</label>
          <textarea name="groupDescription" id="editGroupDescriptionInput" placeholder="Enter group description" rows="3"></textarea>
        </div>
        <div class="ui error message"></div>
      </form>
    </div>
    <div class="actions">
      <div class="ui black deny button">Cancel</div>
      <div class="ui positive right labeled icon button" id="saveGroupInfoBtn">
        Save Changes
        <i class="checkmark icon"></i>
      </div>
    </div>
  </div>

  <!-- Group Invite Link Modal -->
  <div class="ui modal" id="modalGroupInviteLink">
    <i class="close icon"></i>
    <div class="header">
      <i class="linkify icon"></i>
      Group Invite Link
    </div>
    <div class="content">
      <div class="ui segment">
        <h4 class="ui header">Current Invite Link</h4>
        <div class="ui action input fluid">
          <input type="text" id="currentInviteLink" readonly placeholder="Loading...">
          <button type="button" class="ui icon button" id="copyInviteLinkBtn">
            <i class="copy icon"></i>
          </button>
        </div>
        <div class="ui description">
          Share this link to invite people to join the group.
        </div>
      </div>
      
      <div class="ui warning message">
        <div class="header">Reset Invite Link</div>
        <p>Resetting the invite link will invalidate the current link and create a new one. Anyone with the old link will no longer be able to join.</p>
        <button class="ui orange button" id="resetInviteLinkBtn">
          <i class="refresh icon"></i> Reset Link
        </button>
      </div>
    </div>
    <div class="actions">
      <div class="ui button">Close</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.4/dist/semantic.min.js"></script>
  <script src="/dashboard/js/app.js"></script>
  <script src="/dashboard/js/groups.js"></script>
  <script src="/dashboard/js/messages.js"></script>
</body>
</html>
